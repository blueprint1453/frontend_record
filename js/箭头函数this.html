<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 1.
      var flag = 996;
      function person(fg) {
        let o = new Object();
        o.flag = fg;
        o.getval = () => {
          console.log(this);
        };
        this.a = 1;
        console.log("^^^^^^");
        console.log(this);
        console.log("^^^^^^");
        return o;
      }
      var pp = new person("251");
      pp.getval();
      console.log("&&&&&&&");
      console.log(pp);
      console.log("&&&&&&&");
      // 输出结果如下：^^^^^^person {a: 1}^^^^^^person {a: 1}&&&&&&&{flag: "251", getval: ƒ}&&&&&&&

      // 2.通过改变父级作用域的this来改变箭头函数的this
      function outer() {
        var inner = function() {
          var obj = {};
          obj.getVal = () => {
            console.log("*******");
            console.log(this);
            console.log("*******");
          };
          return obj;
        };
        return inner;
      }
      outer().bind(outer)().getVal();
      
    </script>
  </body>
</html>
