<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //-------------------------------------------------
      // class Sleep {
      //   constructor(timeout) {
      //     this.timeout = timeout;
      //   }
      //   then(resolve, reject) {
      //     const startTime = Date.now();
      //     setTimeout(() => resolve(Date.now() - startTime), this.timeout);
      //   }
      // }
      // (async () => {
      //   const sleepTime = await new Sleep(1000);
      //   console.log(sleepTime);
      // })()

      //-------------------------------------------------
      // function sleep(interval) {
      //   return new Promise(resolve => {
      //     setTimeout(resolve, interval);
      //   });
      // }

      // // 用法
      // async function one2FiveInAsync() {
      //   for (let i = 1; i <= 5; i++) {
      //     console.log(i);
      //     await sleep(1000);
      //   }
      // }

      // one2FiveInAsync();

      // -----------------------------------
      // async function f() {
      //   await Promise.reject("出错了");
      // }

      // f()
      //   .then(v => console.log(v))
      //   .catch(e => console.log(e));

      // ------------------------------------
      // function sleep(interval) {
      //   return new Promise(resolve => {
      //     setTimeout(() => resolve('success'), interval)
      //   })
      // }
      // async function main() {
      //   try {
      //     const val1 = await sleep(1000)
      //     console.log('val1 ' + val1)
      //     const val2 = await Promise.reject('error')
      //     const val3 = await sleep(1000)
      //     console.log('val3 ' + val3)

      //   } catch (err) {
      //     console.error(err);
      //   }
      // }
      // main()

      // ---------------------------------------
      // function sleep(interval) {
      //   return new Promise(resolve => {
      //     setTimeout(
      //       () => resolve("success after " + interval + "ms"),
      //       interval
      //     );
      //   });
      // }

      // let f1 = sleep(1000);
      // let f2 = Promise.reject('error');
      // let f3 = sleep(3000);

      // async function main() {
      //   console.log(Date.now())
      //   let result = await Promise.all([f1, f2, f3])
      //   console.log(Date.now())
      //   console.log(result)
      // }

      // async function main2() {
      //   let startTime = Date.now()
      //   console.log(Date.now())
      //   let f1 = sleep(1000)
      //   let f2 = sleep(2000)
      //   let res1 = await f1
      //   let res2 = await f2
      //   console.log(Date.now())
      //   console.log('main2 ' + Date.now() - startTime)
      // }
      // main()
      // main2()

      // -----------------------------------------
      function sleep(i, interval) {
        return new Promise(resolve => {
          setTimeout(() => resolve(i), interval)
        })
      }
      async function forAsync(db) {
        let docs = [1, 2, 3, 4];

        for (let doc of docs) {
          let result = await sleep(doc, 1000)
          console.log(result)
        }
      }
      forAsync()
    </script>
  </body>
</html>
